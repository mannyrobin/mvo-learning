!function($){var n={},t=!1,a=!1,o={init:function(){var n="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0;$(document).on("input",".wpforms-form-abandonment :input",this.prepData),$(document).on("change",".wpforms-form-abandonment input[type=radio]",this.prepData),$(document).on("change",".wpforms-form-abandonment input[type=checkbox]",this.prepData),$(document).on("change",".wpforms-form-abandonment .wpforms-timepicker",this.prepData),$(document).on("mouseleave",this.abandonMouse),n?$(document).on("click",this.abandonClick):$(document).on("mousedown",this.abandonClick)},prepData:function(a){var o=$(a.target).closest(".wpforms-form"),e=o.data("formid");n[e]=o.serializeArray(),t=JSON.stringify(n)},sendData:function(){t&&!a&&(a=!0,setTimeout(function(){a=!1},1e4),$.post(wpforms_form_abandonment.ajaxurl,{action:"wpforms_form_abandonment",forms:t}),n={},t=!1)},abandonMouse:function(n){n.offsetX<-1||n.clientY>20||o.sendData()},abandonClick:function(n){for(var t=n.srcElement||n.target;t&&("undefined"==typeof t.tagName||"a"!==t.tagName.toLowerCase()||!t.href);)t=t.parentNode;if(t&&t.href){var a=t.href,e="internal";if("mailto"===t.protocol?e="mailto":a.indexOf(wpforms_form_abandonment.home_url)===-1&&(e="external"),("external"===e||"internal"===e)&&!a.match(/^javascript\:/i)){var r=!(!t.target||t.target.match(/^_(self|parent|top)$/i))&&t.target;(n.ctrlKey||n.shiftKey||n.metaKey||2===n.which)&&(r="_blank"),r?o.sendData():(n.preventDefault?n.preventDefault():n.returnValue=!1,o.sendData(),window.location.href=a)}}}};o.init()}(jQuery);