!function(e){"use strict";var i,t={settings:{surveyFields:["text","textarea","select","radio","checkbox","rating","likert_scale"]},init:function(){i=this.settings,e(document).ready(t.ready),t.buildUIActions()},ready:function(){t.likertSortable()},buildUIActions:function(){e(document).on("change","#wpforms-panel-field-settings-survey_enable",function(){e(this).is(":checked")?e(".wpforms-field-option-row-survey").addClass("wpforms-hidden"):e(".wpforms-field-option-row-survey").removeClass("wpforms-hidden")}),e(document).on("wpformsFieldAdd",function(t,o,s){e.inArray(s,i.surveyFields)>-1&&e("#wpforms-panel-field-settings-survey_enable").is(":checked")&&e("#wpforms-field-option-row-"+o+"-survey").addClass("wpforms-hidden")}),e(document).on("wpformsFieldAdd",function(e,i,o){"likert_scale"===o&&t.likertSortable("#wpforms-field-option-"+i+" .choices-list")}),e(document).on("click",".wpforms-field-option-likert_scale .choices-list .add",function(i){t.likertChoiceAdd(i,e(this))}),e(document).on("click",".wpforms-field-option-likert_scale .choices-list .remove",function(i){t.likertChoiceDelete(i,e(this))}),e(document).on("focusout",".wpforms-field-option-likert_scale .choices-list input",function(){var i=e(this).closest(".choices-list").data("field-id");t.likertChoiceUpdate(i)}),e(document).on("change",".wpforms-field-option-likert_scale .wpforms-field-option-row-single_row input",function(){e(this).closest(".wpforms-field-option-group-inner").find(".wpforms-field-option-row-rows .choices-list").toggleClass("wpforms-hidden"),t.likertChoiceUpdate(e(this).parent().data("field-id"))}),e(document).on("change",".wpforms-field-option-likert_scale .wpforms-field-option-row-multiple_responses input",function(){t.likertChoiceUpdate(e(this).parent().data("field-id"))}),e(document).on("change",".wpforms-field-option-likert_scale .wpforms-field-option-row-style select",function(){var i=e(this),t=i.val(),o=i.parent().data("field-id");e("#wpforms-field-"+o).find("table").removeClass("classic modern").addClass(t)})},likertSortable:function(i){e(i=i||".wpforms-field-option-likert_scale .choices-list").sortable({items:"li",axis:"y",delay:100,opacity:.6,handle:".move",stop:function(e,i){var o=i.item.parent().data("field-id");t.likertChoiceUpdate(o)},update:function(){}})},likertChoiceAdd:function(i,o){i.preventDefault();var s=e(o),n=s.parent(),l=s.closest(".choices-list"),r=l.data("field-id"),c=l.attr("data-next-id"),d=l.data("choice-type"),a=n.clone().insertAfter(n);a.attr("data-key",c),a.find("input").val("").attr("name","fields["+r+"]["+d+"]["+c+"]"),c++,l.attr("data-next-id",c),t.likertChoiceUpdate(r)},likertChoiceDelete:function(i,o){i.preventDefault();var s=e(o),n=s.closest(".choices-list");1===n.find("li").length?e.alert({title:!1,content:wpforms_builder.error_choice,icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_builder.ok,btnClass:"btn-confirm",keys:["enter"]}}}):(s.parent().remove(),t.likertChoiceUpdate(n.data("field-id")))},likertChoiceUpdate:function(i){var t={rows:{},columns:{},colCount:0,singleRow:e("#wpforms-field-option-"+i+"-single_row").is(":checked "),singleClass:e("#wpforms-field-option-"+i+"-single_row").is(":checked ")?"single-row":"",inputType:e("#wpforms-field-option-"+i+"-multiple_responses").is(":checked ")?"checkbox":"radio",style:e("#wpforms-field-option-"+i+"-style").val(),width:0};e("#wpforms-field-option-row-"+i+"-columns .choices-list li").each(function(){var i=e(this),o=i.data("key"),s=i.find("input").val();t.columns["c"+o]={key:o,value:s},t.colCount++}),e("#wpforms-field-option-row-"+i+"-rows .choices-list li").each(function(){var i=e(this),o=i.data("key"),s=i.find("input").val();t.rows["r"+o]={key:o,value:s}}),t.width=t.singleRow?100/t.colCount:80/t.colCount;var o=wp.template("wpforms-likert-scale-preview");e("#wpforms-field-"+i).find("table").replaceWith(o(t))}};t.init()}(jQuery);